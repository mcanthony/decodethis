function Test(t,e){t&&(t.status="Untested",this.data=t,this.onFinish=null,this.onProgress=null,this.onReset=null,this.percentComplete=0,this.start=function(){self=this,this.status="running",loadanddecode(this.data.path+this.data.filename,function(t,e){self.status="complete","function"==typeof self.onFinish&&self.onFinish(t,e)},function(t){t.lengthComputable&&(self.percentComplete=Math.round(100*t.loaded/t.total)),"function"==typeof self.onProgress&&self.onProgress(self.percentComplete)},e)},this.reset=function(){this.status="init",this.percentComplete=0,"function"==typeof this.onReset&&this.onReset()},this.status="init")}
function loadanddecode(n,o,t,e){e||(window.AudioContext=window.AudioContext||window.webkitAudioContext,e=new AudioContext);var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200===r.status||304===r.status?e.decodeAudioData(r.response,function(n){"function"==typeof o&&o(null,n)},function(){"function"==typeof o&&o(new Error("Decoding Error"),null)}):"function"==typeof o&&o(new Error("Loading Error : "+r.status),null)},r.onerror=function(){"function"==typeof o&&o(new Error("Loading Error : "+r.status),null)},r.onprogress=function(n){"function"==typeof t&&t(n)},r.send()}
window.addEventListener("load",function(){function t(t,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="json",o.onload=function(){"function"==typeof n&&n(o.response)},o.error=function(){"function"==typeof n&&n(null)},o.send()}function n(t){t.path=o;var n=new Test(t,i);return console.log(n),n}var o="audio/",e="files.json";window.AudioContext=window.AudioContext||window.webkitAudioContext;var s,i=new window.AudioContext,a=[];t(o+e,function(t){s=new Ractive({el:"testlist",template:"#head",data:{tests:a}}),t.files.forEach(function(t){var o=n(t);a.push(o)}),s.on("starttest",function(t,n){var o=a[n];o.onFinish=function(t){console.log("done",o);var e="tests."+n+".data.status";t?s.set(e,t.toString()):s.set(e,"Passed")},o.start()}),window.tests=a})});